



<!DOCTYPE html>
<html lang="en" class="">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    
    
    <title>alanfranz/docker-rpm-builder Â· GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="alanfranz/docker-rpm-builder" name="twitter:title" /><meta content="docker-rpm-builder - Build native RPM packages by leveraging docker capabilities." name="twitter:description" /><meta content="https://avatars1.githubusercontent.com/u/230827?v=3&amp;s=400" name="twitter:image:src" />
<meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars1.githubusercontent.com/u/230827?v=3&amp;s=400" property="og:image" /><meta content="alanfranz/docker-rpm-builder" property="og:title" /><meta content="https://github.com/alanfranz/docker-rpm-builder" property="og:url" /><meta content="docker-rpm-builder - Build native RPM packages by leveraging docker capabilities." property="og:description" />

      <meta name="browser-stats-url" content="/_stats">
    <link rel="assets" href="https://assets-cdn.github.com/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_source" data-pjax-transient>
      <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="43A40E90:72C5:A6A0FC6:54D53639" name="octolytics-dimension-request_id" />
    
    <meta content="Rails, view, files#disambiguate" name="analytics-event" />

    
    
    <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">


    <meta content="authenticity_token" name="csrf-param" />
<meta content="YOi1Xu4ZA8Nbthy7yUVpoeHemkI4GR97qIZ61w8M4Sq7sS6Lx4FOnOtf9ii1d/Kyb2gldmq8nkMuUvx7lnwQbg==" name="csrf-token" />

    <link href="https://assets-cdn.github.com/assets/github-2645526bc0bcaf7ed5cabb60c0fe8c219102b8e1ea6315cf60b96a8556266518.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://assets-cdn.github.com/assets/github2-faeea63a73c53601b12a7da49769bb02afa3a08019d38f5b12f121a5c5f6fa8a.css" media="all" rel="stylesheet" type="text/css" />
    
    


    <meta http-equiv="x-pjax-version" content="915c634b50c904be90a3397e6e8c9a4a">

      
  <meta name="description" content="docker-rpm-builder - Build native RPM packages by leveraging docker capabilities.">
  <meta name="go-import" content="github.com/alanfranz/docker-rpm-builder git https://github.com/alanfranz/docker-rpm-builder.git">

  <meta content="230827" name="octolytics-dimension-user_id" /><meta content="alanfranz" name="octolytics-dimension-user_login" /><meta content="14951906" name="octolytics-dimension-repository_id" /><meta content="alanfranz/docker-rpm-builder" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="14951906" name="octolytics-dimension-repository_network_root_id" /><meta content="alanfranz/docker-rpm-builder" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/alanfranz/docker-rpm-builder/commits/v1.atom" rel="alternate" title="Recent Commits to docker-rpm-builder:v1" type="application/atom+xml">

  </head>


  <body class="logged_out  env-production  vis-public">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out" role="banner">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/" ga-data-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions" role="navigation">
        <a class="button primary" href="/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      <a class="button" href="/login?return_to=%2Falanfranz%2Fdocker-rpm-builder" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
    </div>

    <div class="site-search repo-scope js-site-search" role="search">
      <form accept-charset="UTF-8" action="/alanfranz/docker-rpm-builder/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/alanfranz/docker-rpm-builder/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <input type="text"
    class="js-site-search-field is-clearable"
    data-hotkey="s"
    name="q"
    placeholder="Search"
    data-global-scope-placeholder="Search GitHub"
    data-repo-scope-placeholder="Search"
    tabindex="1"
    autocapitalize="off">
  <div class="scope-badge">This repository</div>
</form>
    </div>

      <ul class="header-nav left" role="navigation">
          <li class="header-nav-item">
            <a class="header-nav-link" href="/explore" data-ga-click="(Logged out) Header, go to explore, text:explore">Explore</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/features" data-ga-click="(Logged out) Header, go to features, text:features">Features</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://enterprise.github.com/" data-ga-click="(Logged out) Header, go to enterprise, text:enterprise">Enterprise</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/blog" data-ga-click="(Logged out) Header, go to blog, text:blog">Blog</a>
          </li>
      </ul>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        
<ul class="pagehead-actions">


  <li>
      <a href="/login?return_to=%2Falanfranz%2Fdocker-rpm-builder"
    class="minibutton with-count star-button tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="/alanfranz/docker-rpm-builder/stargazers">
      54
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Falanfranz%2Fdocker-rpm-builder"
        class="minibutton with-count js-toggler-target fork-button tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="/alanfranz/docker-rpm-builder/network" class="social-count">
        6
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="/alanfranz" class="url fn" itemprop="url" rel="author"><span itemprop="title">alanfranz</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="/alanfranz/docker-rpm-builder" class="js-current-repository" data-pjax="#js-repo-pjax-container">docker-rpm-builder</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline with-full-navigation ">
        <div class="repository-sidebar clearfix">
            
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders"
     role="navigation"
     data-pjax="#js-repo-pjax-container"
     data-issue-count-url="/alanfranz/docker-rpm-builder/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="/alanfranz/docker-rpm-builder" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /alanfranz/docker-rpm-builder">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="/alanfranz/docker-rpm-builder/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /alanfranz/docker-rpm-builder/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="js-issue-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
      <a href="/alanfranz/docker-rpm-builder/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /alanfranz/docker-rpm-builder/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
          <span class="js-pull-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>


  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="/alanfranz/docker-rpm-builder/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /alanfranz/docker-rpm-builder/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="/alanfranz/docker-rpm-builder/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /alanfranz/docker-rpm-builder/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>
  </ul>


</nav>

              <div class="only-with-full-nav">
                  
<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/alanfranz/docker-rpm-builder.git" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/alanfranz/docker-rpm-builder" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



<p class="clone-options">You can clone with
  <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a> or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <span class="octicon octicon-question"></span>
  </a>
</p>



                <a href="/alanfranz/docker-rpm-builder/archive/v1.zip"
                   class="minibutton sidebar-button"
                   aria-label="Download the contents of alanfranz/docker-rpm-builder as a zip file"
                   title="Download the contents of alanfranz/docker-rpm-builder as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          
<span id="js-show-full-navigation"></span>

<div class="repository-meta js-details-container ">
    <div class="repository-description">
      Build native RPM packages by leveraging docker capabilities.
    </div>



</div>

<div class="overall-summary overall-summary-bottomless">

  <div class="stats-switcher-viewport js-stats-switcher-viewport">
    <div class="stats-switcher-wrapper">
    <ul class="numbers-summary">
      <li class="commits">
        <a data-pjax href="/alanfranz/docker-rpm-builder/commits/v1">
            <span class="octicon octicon-history"></span>
            <span class="num text-emphasized">
              181
            </span>
            commits
        </a>
      </li>
      <li>
        <a data-pjax href="/alanfranz/docker-rpm-builder/branches">
          <span class="octicon octicon-git-branch"></span>
          <span class="num text-emphasized">
            2
          </span>
          branches
        </a>
      </li>

      <li>
        <a data-pjax href="/alanfranz/docker-rpm-builder/releases">
          <span class="octicon octicon-tag"></span>
          <span class="num text-emphasized">
            3
          </span>
          releases
        </a>
      </li>

      <li>
        
  <a href="/alanfranz/docker-rpm-builder/graphs/contributors">
    <span class="octicon octicon-organization"></span>
    <span class="num text-emphasized">
      1
    </span>
    contributor
  </a>
      </li>
    </ul>

      <div class="repository-lang-stats">
        <ol class="repository-lang-stats-numbers">
          <li>
              <a href="/alanfranz/docker-rpm-builder/search?l=python">
                <span class="color-block language-color" style="background-color:#3581ba;"></span>
                <span class="lang">Python</span>
                <span class="percent">54.4%</span>
              </a>
          </li>
          <li>
              <a href="/alanfranz/docker-rpm-builder/search?l=perl">
                <span class="color-block language-color" style="background-color:#0298c3;"></span>
                <span class="lang">Perl</span>
                <span class="percent">23.1%</span>
              </a>
          </li>
          <li>
              <a href="/alanfranz/docker-rpm-builder/search?l=bash">
                <span class="color-block language-color" style="background-color:#89e051;"></span>
                <span class="lang">Shell</span>
                <span class="percent">17.6%</span>
              </a>
          </li>
          <li>
              <a href="/alanfranz/docker-rpm-builder/search?l=makefile">
                <span class="color-block language-color" style="background-color:;"></span>
                <span class="lang">Makefile</span>
                <span class="percent">4.9%</span>
              </a>
          </li>
        </ol>
      </div>
    </div>
  </div>

</div>

  <div class="tooltipped tooltipped-s" aria-label="Show language statistics">
    <a href="#"
     class="repository-lang-stats-graph js-toggle-lang-stats"
     style="background-color:">
  <span class="language-color" style="width:54.4%; background-color:#3581ba;" itemprop="keywords">Python</span><span class="language-color" style="width:23.1%; background-color:#0298c3;" itemprop="keywords">Perl</span><span class="language-color" style="width:17.6%; background-color:#89e051;" itemprop="keywords">Shell</span><span class="language-color" style="width:4.9%; background-color:;" itemprop="keywords">Makefile</span>
    </a>
  </div>

<include-fragment src="/alanfranz/docker-rpm-builder/show_partial?partial=recently_touched_branches_list"></include-fragment>

<div class="file-navigation in-mid-page">
  <a href="/alanfranz/docker-rpm-builder/find/v1"
        class="js-show-file-finder minibutton empty-icon tooltipped tooltipped-s right"
        data-pjax
        data-hotkey="t"
        aria-label="Quickly jump between files">
    <span class="octicon octicon-list-unordered"></span>
  </a>
    <a href="/alanfranz/docker-rpm-builder/compare" aria-label="Compare, review, create a pull request" class="minibutton primary tooltipped tooltipped-s left compare-button" aria-label="Compare &amp; review" data-pjax>
      <span class="octicon octicon-git-compare"></span>
    </a>

  
<div class="select-menu js-menu-container js-select-menu left">
  <span class="minibutton select-menu-button js-menu-target css-truncate" data-hotkey="w"
    data-master-branch="v1"
    data-ref="v1"
    title="v1"
    role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button css-truncate-target">v1</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-x js-menu-close" role="button" aria-label="Close"></span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/alanfranz/docker-rpm-builder/tree/master"
                 data-name="master"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="master">master</a>
            </div>
            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/alanfranz/docker-rpm-builder/tree/v1"
                 data-name="v1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="v1">v1</a>
            </div>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/alanfranz/docker-rpm-builder/tree/1.7"
                 data-name="1.7"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="1.7">1.7</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/alanfranz/docker-rpm-builder/tree/1.6"
                 data-name="1.6"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="1.6">1.6</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/alanfranz/docker-rpm-builder/tree/0.9"
                 data-name="0.9"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.9">0.9</a>
            </div>
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>



  <div class="breadcrumb"><span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/alanfranz/docker-rpm-builder" class="" data-branch="v1" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">docker-rpm-builder</span></a></span></span><span class="separator">/</span><a aria-label="You must be signed in to make or propose changes" class="octicon-button disabled tooltipped tooltipped-e" href="#"><span class="octicon octicon-plus"></span></a></div>
</div>



  
  <div class="commit commit-tease js-details-container" >
    <p class="commit-title ">
        <a href="/alanfranz/docker-rpm-builder/commit/291f511ee4bea0f64137e9643e8384705bc1b7b1" class="message" data-pjax="true" title="Enh: add key feature">Enh: add key feature</a>
        
    </p>
    <div class="commit-meta">
      <button aria-label="Copy SHA" class="js-zeroclipboard zeroclipboard-link" data-clipboard-text="291f511ee4bea0f64137e9643e8384705bc1b7b1" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
      <a href="/alanfranz/docker-rpm-builder/commit/291f511ee4bea0f64137e9643e8384705bc1b7b1" class="sha-block" data-pjax>latest commit <span class="sha">291f511ee4</span></a>

      <div class="authorship">
        <img alt="Alan Franzoni" class="avatar" data-user="230827" height="20" src="https://avatars0.githubusercontent.com/u/230827?v=3&amp;s=40" width="20" />
        <span class="author-name"><a href="/alanfranz" rel="author">alanfranz</a></span>
        authored <time class="updated" datetime="2015-02-06T17:32:07Z" is="relative-time">Feb 6, 2015</time>

      </div>
    </div>
  </div>

  
<div class="file-wrap">

  <table class="files" data-pjax>


    <tbody>
      <tr class="warning include-fragment-error">
        <td class="icon"><span class="octicon octicon-alert"></span></td>
        <td class="content" colspan="3">Failed to load latest commit information.</td>
      </tr>

        <tr>
          <td class="icon">
            <span class="octicon octicon-file-directory"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/tree/v1/drb" class="js-directory-link" id="992a415d077a0aa33968e19eab5b3094-d376bece85829c5c37ce8cf7862681eebbda1491" title="drb">drb</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/ac363c5e061fb2dac0664cfc0572a7eae2bb0e22" class="message" data-pjax="true" title="Fix: better error message">Fix: better error message</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-04T22:08:06Z" is="time-ago">Feb 4, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-directory"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/tree/v1/experiments" class="js-directory-link" id="50301c95f5dd8a0b04e4a3dacadb421d-dbca028cee4d0fbac124c33076c0cf7d3915e71d" title="experiments">experiments</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/04851133cf4cea9f34660c7ae03eade6ed8b7091" class="message" data-pjax="true" title="Cleanup: make sure things work properly with current docker version, add some runtime hooks">Cleanup: make sure things work properly with current docker version, â¦</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-09-18T15:10:20Z" is="time-ago">Sep 18, 2014</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/.gitignore" class="js-directory-link" id="a084b794bc0759e7a6b77810e01874f2-851679327f2aa60f0b8d4cf4d48187a1a13567a4" title=".gitignore">.gitignore</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/b005ede5436dc5f3e237fd0d1b65b4a0207208c8" class="message" data-pjax="true" title="Fix: ignores">Fix: ignores</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-05T20:58:28Z" is="time-ago">Feb 5, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/LICENSE" class="js-directory-link" id="9879d6db96fd29134fc802214163b95a-b08b62a274a643fa1f6b3bd6df01dd9168582a6b" title="LICENSE">LICENSE</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/0478db3065b431b8d60b2f1c40f6e558856f9a2a" class="message" data-pjax="true" title="Fix: cleanup">Fix: cleanup</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2014-03-14T12:11:18Z" is="time-ago">Mar 14, 2014</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/Makefile" class="js-directory-link" id="b67911656ef5d18c4ae36cb6741b7965-b235c499d97fc4886ac1c2a69d0e1ca008f004b2" title="Makefile">Makefile</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/4dfe2a47ec0be0ec3387e3dc6638fdc5fbbe58cb" class="message" data-pjax="true" title="Enh: not yet done with packaging issues">Enh: not yet done with packaging issues</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-05T21:45:59Z" is="time-ago">Feb 5, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/README.md" class="js-directory-link" id="04c6e90faac2675aa89e2176d2eec7d8-432d664fa81d460ec523866060c1146d6d8fcc2f" title="README.md">README.md</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/291f511ee4bea0f64137e9643e8384705bc1b7b1" class="message" data-pjax="true" title="Enh: add key feature">Enh: add key feature</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-06T17:32:07Z" is="time-ago">Feb 6, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/README.rst" class="js-directory-link" id="88b99bb28683bd5b7e3a204826ead112-23fc05566e5bd0f3bdbb6fb0e96cc0e54b8dd48e" title="README.rst">README.rst</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/71d102fcb65c34e63848c1b03d13d5dbc853886a" class="message" data-pjax="true" title="Enh: pypi-friendly description">Enh: pypi-friendly description</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-05T01:08:59Z" is="time-ago">Feb 5, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/docker-rpm-builder.spectemplate" class="js-directory-link" id="9d35b4875178f6de2be5885fffda4e7c-720360033d780b36131ea1fba378dd643e87a751" title="docker-rpm-builder.spectemplate">docker-rpm-builder.spectemplate</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/e59a82287ee5a106f6e8153e3abbfb855a634c45" class="message" data-pjax="true" title="Fix: forgotten conflict?">Fix: forgotten conflict?</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-05T22:24:41Z" is="time-ago">Feb 5, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/requirements.txt" class="js-directory-link" id="b4ef698db8ca845e5845c4618278f29a-98a3084ef3af8bc6f3ca7e05dabe7641d5ca5fcf" title="requirements.txt">requirements.txt</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/e098367760105d53c2847b7a48247b781196b1a2" class="message" data-pjax="true" title="Bump development version">Bump development version</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-06T11:42:45Z" is="time-ago">Feb 6, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/setup.py" class="js-directory-link" id="2eeaed663bd0d25b7e608891384b7298-83f9bf22b653a6ad5e90bd321637ec597c3515f7" title="setup.py">setup.py</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/71d102fcb65c34e63848c1b03d13d5dbc853886a" class="message" data-pjax="true" title="Enh: pypi-friendly description">Enh: pypi-friendly description</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-05T01:08:59Z" is="time-ago">Feb 5, 2015</time></span>
          </td>
        </tr>
        <tr>
          <td class="icon">
            <span class="octicon octicon-file-text"></span>
            <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a href="/alanfranz/docker-rpm-builder/blob/v1/version.txt" class="js-directory-link" id="5fb01c6f8b54d96c62af3415c51ffad3-1d253b5c2594eb0678bfe9641bc1427393ecea38" title="version.txt">version.txt</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
              <a href="/alanfranz/docker-rpm-builder/commit/e098367760105d53c2847b7a48247b781196b1a2" class="message" data-pjax="true" title="Bump development version">Bump development version</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time datetime="2015-02-06T11:42:45Z" is="time-ago">Feb 6, 2015</time></span>
          </td>
        </tr>
    </tbody>
  </table>

</div>


  <div id="readme" class="boxed-group flush clearfix announce instapaper_body md">
    <h3>
      <span class="octicon octicon-book"></span>
      README.md
    </h3>

    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a id="user-content-fast-native-rpm-building-from-any-distro-for-any-distro-via-docker" class="anchor" href="#fast-native-rpm-building-from-any-distro-for-any-distro-via-docker" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fast native RPM building from any distro, for any distro, via docker.</h1>

<h2>
<a id="user-content-preamble" class="anchor" href="#preamble" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preamble</h2>

<p>While other deployment systems are at rage today, software delivery via RPM is still pretty widespread; its integration with the distributions' own tools makes it a good choice in many environments.</p>

<p>But RPM building can be painful, especially when native code is involved; building through <a href="http://www.rpm.org/max-rpm-snapshot/ch-rpm-b-command.html">rpmbuild</a> requires the proper dependencies to be setup on the very same distribution that should be targeted, and making sure that the build system is "clean" - i.e. that no hidden dependency exists, is complex.</p>

<p>More often than not RPM building from scratch is an iterative and frustrating process, requiring a lot of time to succeed.</p>

<p>Tools have been created to ensure build isolation and repeatability; <a href="https://fedoraproject.org/wiki/Projects/Mock">mock</a> seems to be the most used, but it comes with its own set of problems - it's slow, since it relies on chroots that get created and untarred every time; it's hard to debug when problems happen and why, since there's a lot of code being employed at all time, and seeing what's happening "inside the build" requires manually re-executing a lot commands.</p>

<p>And, last but not least, mock doesn't reliably work on non-RPM based distribution, making it difficult to create the initial RPM on the developer's machine if an RPM-based distro is not employed.</p>

<p>RPM by itself is not very suited to a continuos integration environment, requiring a .src.rpm to be created before the binary RPM can be generated; this is often unnecessary in today's environments where the source tracking occurs on VCS systems, and, again, slows the whole process down.</p>

<h2>
<a id="user-content-key-features" class="anchor" href="#key-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Key features</h2>

<p><strong>docker-rpm-builder</strong> works on any host distributions that supports <a href="https://www.docker.com/">docker</a>, and is currently tested to build 64 bit Centos 5, 6 and 7 RPM packages, as well as Fedora 20, 21 and rawhide.</p>

<p>It's designed to be a very <strong>small and hackable wrapper</strong> to help in rpm building, and lets you build binary RPMs on the fly, <strong>without generating an intermediate source rpm</strong>, which is a bit of an unnecessary byproduct nowadays, since most source tracking is done in a revision control system. Docker capabilities are leveraged to make the build <strong>fast</strong>; copy is limited, and bind-mount between host and container is privileged whenever it's possible.</p>

<p>It leverages the standard RPM creation system - it's <strong>not</strong> a different build system like <a href="https://github.com/jordansissel/fpm">fpm</a>, which has its own options and wraps different distributions' build tools.</p>

<p>It <strong>improves</strong> the standard RPM creation system by <strong>not requiring a .src.rpm to be created</strong> - builds can happen straight from a source directory - and by <strong>adding a templating layer</strong> over the .spec files which lets variables to be easily injected - this is especially useful in a continuous integration environment, where a build number and/or a reference VCS commit can be integrated.</p>

<p>It's highly <strong>debuggable</strong> - with the proper option set, whenever a build failure occurs, an interactive shell is spawned in the very context of the build.</p>

<p>It's <strong>fast</strong> (benchmarks are going to happen soon, I'm trying to perform some reproducibile tests right now and I plan to add them to the repo) - by leveraging Docker capabilities there's very little copy happening between builds; such minimal IO speeds things up. But the real performance improvement
comes from the ease of use from any host system, from the interacive shell spawning and from the great hackability to suit your build needs.</p>

<p>The root filesystem is <em>fully writeable</em> - this is very handy if you've got an application that in some way hardcodes paths when installed,
and you get errors because paths like "/tmp/buildroot-something" found in files. Just install it in the place it's meant to be installed and
move it to <code>${RPM_BUILD_ROOT}</code> afterwards.</p>

<p>Builds done in such fashion are <strong>highly reproducible</strong> - if your build image already contains all the build dependencies, and you disable docker network,
the same build input will always yield the same output. This does not mean that files would be 100% identical, there may be build-time changes
depending e.g. on current time - but no external influence is possible.</p>

<h2>
<a id="user-content-limitations" class="anchor" href="#limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Limitations</h2>

<ul class="task-list">
<li>Currently limited to x86_64 for both host and target. That's a docker limitation which is unlikely to go away soon.</li>
</ul>

<h2>
<a id="user-content-required-knowledge" class="anchor" href="#required-knowledge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Required knowledge</h2>

<p>You should have a vague idea of what <a href="https://www.docker.com">docker</a> is and you should already know how to build an RPM - see to <a href="http://www.rpm.org/max-rpm/">Maximum RPM</a> and other documentation from Fedora <a href="https://fedoraproject.org/wiki/How_to_create_an_RPM_package">HowTO</a> <a href="http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/">RPM Guide</a>.</p>

<h2>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a id="user-content-centosrhel-66-and-7x" class="anchor" href="#centosrhel-66-and-7x" aria-hidden="true"><span class="octicon octicon-link"></span></a>CentOS/RHEL 6.6 and 7.x</h3>

<p>There's an <a href="http://rpmrepos.franzoni.eu/">RPM repository</a> for those distributions - such packages are built via docker-rpm-builder itself.</p>

<p>Please refer to docker installation instructions for <a href="https://docs.docker.com/installation/centos/">CentOS</a> and <a href="https://docs.docker.com/installation/rhel/">RHEL</a> for details. You'll probably need to enable <a href="https://fedoraproject.org/wiki/EPEL">EPEL</a> or distro-specific extras repositories for the install to succeed.</p>

<p>docker-rpm-builder already depends on the proper docker package for each distribution; once your repos are in place, just</p>

<pre><code>yum install docker-rpm-builder
</code></pre>

<p>And you're done; skip to the <a href="#docker-configuration">docker configuration</a> section.</p>

<h3>
<a id="user-content-fedora-2021rawhide" class="anchor" href="#fedora-2021rawhide" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fedora 20/21/rawhide</h3>

<p>There's an <a href="http://rpmrepos.franzoni.eu/">RPM repository</a> for those distributions as well, and those packages are built via docker-rpm-builder, again.</p>

<p>Please refer to docker installation instructions for <a href="https://docs.docker.com/installation/fedora/">Fedora</a> for details.</p>

<p>docker-rpm-builder already depends on the proper docker package for each distribution; once your repos are in place, just</p>

<pre><code>yum install docker-rpm-builder
</code></pre>

<p>And you're done; skip to the <a href="#docker-configuration">docker configuration</a> section.</p>

<h3>
<a id="user-content-other-distributions" class="anchor" href="#other-distributions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other distributions</h3>

<p>I hope to create DEB packages for Ubuntu and Debian some day; in the meantime, whatever your distribution is, you can just use the <a href="https://pypi.python.org/pypi/docker-rpm-builder/">docker-rpm-builder python package</a> and manually configure the system by yourself; the following steps will guide you in such process.</p>

<h4>
<a id="user-content-prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites</h4>

<p>You must have <a href="https://www.docker.com/">docker</a> &gt;= 1.3 installed and properly configured (see the <a href="https://docs.docker.com/installation/#installation">install docs</a> and the <a href="#docker-configuration">docker configuration</a> section.</p>

<p>Python 2.7, bash, perl and curl should be installed on your system as well. If <em>spectool</em> is available
for your distribution it is recommended to have it available as well, since I've encountered some issues
with the one I bundle on some distros (and I couldn't find a version that would work on all distros).</p>

<h4>
<a id="user-content-installation-from-pypi" class="anchor" href="#installation-from-pypi" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation from pypi</h4>

<p>docker-rpm-builder is a pure Python package; if you know python packaging works,
I recommend you just create a virtualenv and <code>pip install docker-rpm-builder</code> inside it.
You'll get a <code>docker-rpm-builder</code> executable in the env's bin directory.</p>

<p>If you don't know how python packaging works, here's a quick guide to installing
docker-rpm-builder.</p>

<p>First, verify <em>python2.7</em> is available on your system</p>

<pre><code>~/bin$ python --version
Python 2.7.6
</code></pre>

<p><em>There may be multiple Python versions installed on your system; check for pythonX.X
executables, and use such executables everywhere in the following steps. If multiple Python versions are installed
you could probably find multiple pip executables like pip-X.X as well</em></p>

<p>Then, check whether an executable called <code>pip</code> is available in your system;
it's probably installed by default on most Linux distributions that offer Python as well.
If it isn't installed, and it's not available in your package manager, you need to
<a href="https://pip.pypa.io/en/latest/installing.html">install it</a>, which probably means
something like:</p>

<pre><code>curl https://bootstrap.pypa.io/get-pip.py | sudo python get-pip.py
</code></pre>

<p>Once you've got pip in place, I recommend using <a href="https://github.com/mitsuhiko/pipsi">pipsi</a>
to install docker-rpm-builder; it's a tool that will create an isolated environment for
a package along with dependencies, without polluting the global environment.</p>

<p>So, execute something like:</p>

<pre><code>curl https://raw.githubusercontent.com/mitsuhiko/pipsi/master/get-pipsi.py | python
</code></pre>

<p>and then</p>

<pre><code>pipsi install docker-rpm-builder
</code></pre>

<p>And you'll find a ready-to-use <em>docker-rpm-builder</em> executable in ~/.local/bin . Consider
adding it to your path or symlink it somewhere, if you prefer.</p>

<p>Then, whenever you want an updated version:</p>

<pre><code>pipsi upgrade docker-rpm-builder
</code></pre>

<h2>
<a id="user-content-docker-configuration" class="anchor" href="#docker-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Docker configuration</h2>

<p>If docker is already up and running on your system, you probably need to do absolutely nothing else.</p>

<p>Otherwise, if it's your first time with docker, here's a checklist:</p>

<ul class="task-list">
<li>Verify the <em>docker</em> service is running</li>
<li>Verify the <em>docker</em> group exists and your user belongs to it. It is advised <strong>not to run docker-rpm-builder as root</strong>. The docker package on some recent Fedoras seems to add a <em>dockerroot</em> group instead - <strong>it won't do!</strong>
</li>
<li>If you had to add the group, verify you've restarted the <em>docker</em> service after such addition</li>
<li>Verify you've logged out+in after adding your user to the group</li>
<li>Verify selinux is disabled. There seems to be work going on to let docker work along selinux, but I could not succeed at using bindmounts as long as selinux is active.</li>
<li>Verify your disk has enough free space</li>
</ul>

<h2>
<a id="user-content-test-everything-works" class="anchor" href="#test-everything-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>Test everything works!</h2>

<p>docker-rpm-builder features an integrated test suite. Run:</p>

<pre><code>docker-rpm-builder selftest
</code></pre>

<p>It requires an Internet connection and may take a bit of time for the first run, since it will be downloading a minimal image.</p>

<p>If you want to be extra-sure everything is fine, run:</p>

<pre><code>docker-rpm-builder selftest --full
</code></pre>

<p>It will take a really long time to run, especially the first time.</p>

<h2>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<h2>
<a id="user-content-building-a-binary-rpm-straight-from-a-directory" class="anchor" href="#building-a-binary-rpm-straight-from-a-directory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building a binary RPM straight from a directory</h2>

<p>You should have a source directory that contains:</p>

<ul class="task-list">
<li>either a .spec file or a <a href="#spectemplates">.spectemplate</a> file</li>
<li>any file that is set as <strong>SourceX</strong> and <strong>PatchX</strong> in the spec file (
if any of your SourceX or PatchX files are URLs, you can use the --download-sources option if the files are not already there.)</li>
</ul>

<p>Then, you should pass a source directory, which will be bind-mounted straight to %{_sourcedir} inside the build container (e.g. /root/rpmbuild/SOURCES on RHEL7 ). You can access such directory straight from your specfile. If you pass --download-sources the URL sources will be downloaded in such directory, so be sure to set the proper ignores for it in your revision control system.</p>

<p>Of course, you should tell the tool which build image you'd like to use; that's the image where. I've baked some <a href="#prebuilt-images">prebuilt images</a>, but you should feel free to create your own, since that's the purpose of this tool.</p>

<p>And you should tell the tool which target directory you'd like to use for rpm output; this directory whill be bound straight to %{_rpmdir} inside the build container, so mind that if your build process does something strange with it, files can be deleted. If the target directory doesn't exist it will be created.</p>

<h3>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h3>

<pre><code>docker-rpm-builder dir --download-sources alanfranz/drb-epel-5-x86-64:latest . /tmp/rpms
</code></pre>

<p>This command will build straight from current dir with the alanfranz/drb-epel-5-x86-64:latest image and output the RPMs you requested in /tmp/rpms.</p>

<p>There're further options to explore: just type</p>

<pre><code>docker-rpm-builder dir --help
</code></pre>

<p>To see everything.</p>

<p>URL-based source/patch downloading, shell spawning on build failure, signing, and always updating the remote images are all supported scenarios.</p>

<h2>
<a id="user-content-spectemplates" class="anchor" href="#spectemplates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Spectemplates</h2>

<p>The spectemplate approach prevents you from editing the .spec file (or creating a new one) for each build; inside your .spectemplate, just define
substitution tags, which are names between @s, e.g.</p>

<pre><code>@BUILD_NUMBER@
</code></pre>

<p>If there's an environment variable called BUILD_NUMBER when you build your project, such variable will be substituted straight into your spec. This is especially useful in an CI server which builds your packages. Consider the .spectemplate for this very project, <a href="/alanfranz/docker-rpm-builder/blob/v1/docker-rpm-builder.spectemplate">docker-rpm-builder.spectemplate</a> , and you can see the @BUILD_NUMBER@ and @GIT_COMMIT@ substitution variables at work; those are set by the <a href="http://jenkins-ci.org/">Jenkins</a> build system.</p>

<p>Please note: you can't have both a .spec and a .spectemplate in your source directory. That will cause an error.</p>

<h2>
<a id="user-content-rebuilding-a-source-rpm" class="anchor" href="#rebuilding-a-source-rpm" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rebuilding a source RPM</h2>

<p>Rebuilding a .src.rpm file is supported as well. Just check the command:</p>

<pre><code>docker-rpm-builder srcrpm --help
</code></pre>

<p>Verification of the .src.rpm signature, signing, spawning a shell on failure and always updating the build image are all supported scenarios.</p>

<h2>
<a id="user-content-build-images" class="anchor" href="#build-images" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build images</h2>

<p>Build images are nothing esoteric. They're just plain OS images with a set of packages, settings and maybe some macros which are needed to perform a build and/or to sign packages. See the <a href="#prebuilt-images">next section</a> for some examples.</p>

<p>In order to use an image for building an RPM:</p>

<ul class="task-list">
<li>rpmbuild must exist in path</li>
<li>yum-builddep must exist in path and accept a .spec file or a .src.rpm as input</li>
<li>commands must be able to complete without interaction - consider using a custom yum.conf with <em>main-&gt;assumeyes=1</em> and be sure all public keys for your repositories are installed.</li>
<li>if you want to sign packages, make sure you install <strong>gnupg</strong> 1.4 and set a proper <strong>%__gpg_sign_cmd</strong> macro in <em>/etc/rpm</em>
</li>
<li>any other build dependencies should be there, but if your package doesn't build because it's missing something else then the proper
thing to do is probably add an entry to <em>BuildRequires</em> in the spec file.</li>
</ul>

<h3>
<a id="user-content-prebuilt-images" class="anchor" href="#prebuilt-images" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prebuilt images</h3>

<p>There're some prebuilt configurations for Centos 5-6-7+EPEL and Fedora 20-21-rawhide at <a href="https://github.com/alanfranz/docker-rpm-builder-configurations">https://github.com/alanfranz/docker-rpm-builder-configurations</a>; those are available on <a href="https://hub.docker.com/u/alanfranz/">my docker hub page</a> as well, so they can be used immediately out of the box. The following are all valid build images:</p>

<ul class="task-list">
<li>alanfranz/drb-epel-5-x86-64:latest</li>
<li>alanfranz/drb-epel-6-x86-64:latest</li>
<li>alanfranz/drb-epel-7-x86-64:latest</li>
<li>alanfranz/drb-fedora-20-x86-64:latest</li>
<li>alanfranz/drb-fedora-21-x86-64:latest</li>
<li>alanfranz/drb-fedora-rawhide-x86-64:latest</li>
</ul>

<h2>
<a id="user-content-speedup-your-build-image-reuse" class="anchor" href="#speedup-your-build-image-reuse" aria-hidden="true"><span class="octicon octicon-link"></span></a>Speedup your build: image reuse</h2>

<p>The impact of this change can be great if you're building a small package with a lot of frequency.</p>

<p>In such situation, the dependency download time can just waste any speed that you could gain by using this tool.</p>

<p>So what?</p>

<p>Well, just use an image which pre-caches your build dependencies!</p>

<p>create a directory like <em>build-image</em> in your project directory;
let's suppose your project needs openssl and openssl-devel to build
on Centos 6.</p>

<p>Enter something like this:</p>

<pre><code>FROM alanfranz/drb-epel-6-x86-64:latest
MAINTAINER myself myself@example.com
RUN yum install openssl openssl-devel
</code></pre>

<p>in your makefile/buildscript/whatever, do something like:</p>

<pre><code>pushd build-image
docker build -t myprojectbuildimage .
popd

docker-rpm-builder dir myprojectbuildimage . rpm_output
</code></pre>

<p>docker is smart enough to <em>not</em> rebuild an image which is unchanged since last build,
hence executing the docker build multiple times will take no time at all unless
you change your Dockerfile.</p>

<p>And since you've already added all build prerequisites, no download will happen.</p>

<p>In the future I may think about adding an option to docker-rpm-builder to help creating
such images without actually needing a Dockerfile on a source repo.</p>

<h2>
<a id="user-content-gotchas" class="anchor" href="#gotchas" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gotchas</h2>

<ul class="task-list">
<li>if you're used to mock, the build system is a bit different, mocks seems to employ different defaults and has different macros, sometimes a build working with mock may file with docker-rpm-builder. I'm investigating the issue. It's quite uncommon BTW.</li>
<li>dns default to public ones, will add an option for private ones. Right now you can just pass arbitrary docker options, so pass --dns and/or set your internal
DNS in the docker config file.</li>
</ul>

<h2>
<a id="user-content-todos-and-ideas" class="anchor" href="#todos-and-ideas" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODOS and ideas</h2>

<ul class="task-list">
<li>General refactor: remove code duplication, improve setup, etc. - things are currently quite messed up.</li>
<li>Support some way to cache build dependencies between builds for the same package (commit after run? commit after build-dep?)</li>
<li>DEB package</li>
<li>Refactor bash-based test into python-based ones, even when spawning processes</li>
<li>Find a better solution than 'spectool' for downloading sources.</li>
</ul>
</article>
  </div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="https://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2015 <span title="0.03597s from github-fe116-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-2badd09f690fc93e95552ba0ecf64200a0019057d5f5c329827f78f98ea76a1c.js" type="text/javascript"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-59570f211caa0930759d3bd5eadce82f64cf1a901f0c17316d19f97d61a0d478.js" type="text/javascript"></script>
      
      

  </body>
</html>

