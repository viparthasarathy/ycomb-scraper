<html><head><meta name="referrer" content="origin"></meta><link rel="stylesheet" type="text/css" href="news.css?zD6eqRMybAklGlUX10Lb"></link><link rel="shortcut icon" href="favicon.ico"></link><script type="text/javascript">
function byId(id) {
  return document.getElementById(id);
}

function vote(node) {
  var v = node.id.split(/_/);   // {'up', '123'}
  var item = v[1];

  // hide arrows
  byId('up_'   + item).style.visibility = 'hidden';
  byId('down_' + item).style.visibility = 'hidden';

  // ping server
  var ping = new Image();
  ping.src = node.href;

  return false; // cancel browser nav
} </script><title>Show HN: Fast native RPM building from any distro, for any distro, via Docker | Hacker News</title></head><body><center><table id="hnmain" op="item" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef"><tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="http://www.ycombinator.com"><img src="y18.gif" width="18" height="18" style="border:1px #ffffff solid;"></img></a></td><td style="line-height:12pt; height:10px;"><span class="pagetop"><b><a href="news">Hacker News</a></b><img src="s.gif" height="1" width="10"><a href="newest">new</a> | <a href="newcomments">comments</a> | <a href="show">show</a> | <a href="ask">ask</a> | <a href="jobs">jobs</a> | <a href="submit">submit</a></span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop"><a href="login?whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">login</a></span></td></tr></table></td></tr><tr style="height:10px"></tr><tr><td><table border="0"><tr><td><center><a id="up_9010127" href="vote?for=9010127&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010127"></span></center></td><td class="title"><span class="deadmark"></span><a href="https://github.com/alanfranz/docker-rpm-builder">Show HN: Fast native RPM building from any distro, for any distro, via Docker</a><span class="sitebit comhead"> (github.com)</span></td></tr><tr><td colspan="1"></td><td class="subtext"><span class="score" id="score_9010127">26 points</span> by <a href="user?id=alanfranzoni">alanfranzoni</a> 4 hours ago  | <a href="item?id=9010127">15 comments</a></td></tr><tr style="height:10px"></tr><tr><td></td><td><form method="post" action="comment"><input type="hidden" name="parent" value="9010127"><input type="hidden" name="whence" value="item?id=9010127"><input type="hidden" name="hmac" value="d0bc5d85d41c853ba9fcf49052e81bcc91b05fba"><textarea name="text" rows="6" cols="60" style="" placeholder=""></textarea><br><br>
<input type="submit" value="add comment"></form></td></tr></table><br><br>
<table border="0"><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9010461" href="vote?for=9010461&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010461"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=rwmj">rwmj</a> 3 hours ago  | <a href="item?id=9010461">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Everything old is new again.  &#x27;mock&#x27; and various SUSE tools have done this for a decade or more.<p>I&#x27;m waiting for the fun to start when they realize that using a different kernel from the one the distro is designed for causes all sorts of crazy-hard-to-find bugs.  Been there with mock, several times.<p>Here was one of my favorites, which took weeks to diagnose:
<a href="https://lists.nongnu.org/archive/html/qemu-devel/2010-02/msg00823.html" rel="nofollow">https:&#x2F;&#x2F;lists.nongnu.org&#x2F;archive&#x2F;html&#x2F;qemu-devel&#x2F;2010-02&#x2F;msg...</a></font></span><p><font size="1"><u><a href="reply?id=9010461&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010843" href="vote?for=9010843&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010843"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=alanfranzoni">alanfranzoni</a> 2 hours ago  | <a href="item?id=9010843">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">You are right, the kernel is still a dependency. But I canno solve all problems - at least my proposal is not worse than mock, and it solves some major nuisances with it, especially the difficulty of debugging build issues.<p>I&#x27;ll add the note about kernel importance in the docs, though. Thanks!</font></span><p><font size="1"><u><a href="reply?id=9010843&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010534" href="vote?for=9010534&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010534"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=TallGuyShort">TallGuyShort</a> 3 hours ago  | <a href="item?id=9010534">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Been there with FPM, too. This is probably handy for platform-independent applications like Java, maybe Python, but with anything native you&#x27;ll have to compile things on the lowest-common-denominator of glibc out of all the systems you&#x27;re targeting, and that means for many applications you&#x27;ll be missing features that you could take advantage on newer systems.</font></span><p><font size="1"><u><a href="reply?id=9010534&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9010611" href="vote?for=9010611&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010611"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=derekp7">derekp7</a> 3 hours ago  | <a href="item?id=9010611">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Does anyone have a use for a tool to assemble an RPM without using a .spec file and the rpmbuild process?  I.e., something that works on a combination of pre-built binaries (in a .tar file) along with a .manifest file?<p>I was putting something together like that a while ago for packaging up software for internal use, that we get from outside vendors.  I can dig it up and throw it on Github if anyone is interested.</font></span><p><font size="1"><u><a href="reply?id=9010611&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010853" href="vote?for=9010853&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010853"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=alanfranzoni">alanfranzoni</a> 2 hours ago  | <a href="item?id=9010853">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">You could use fpm.<p>But the point is: can you pack <i>every single dependency</i> in your project? Usually you&#x27;ll need something from the outside distro (libc usually). Then if you&#x27;re building on a different host than your target, you may experience issues or different runtime behaviour.</font></span><p><font size="1"><u><a href="reply?id=9010853&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010679" href="vote?for=9010679&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010679"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nailer">nailer</a> 3 hours ago  | <a href="item?id=9010679">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Not automated, but quick and you could certainly automate it (alas I don&#x27;t build many apps from source these days):<p>- Make a spec with &#x2F; (actually the build root) in %files section<p>- Run the build<p>- List the resulting package contents (which is whatever was put into the build root)<p>- Manually remove any common dirs<p>- Update the %files section and rebuild</font></span><p><font size="1"><u><a href="reply?id=9010679&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010678" href="vote?for=9010678&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010678"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tpg">tpg</a> 3 hours ago  | <a href="item?id=9010678">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I use FPM (<a href="https://github.com/jordansissel/fpm" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;jordansissel&#x2F;fpm</a>) for that and it works wonderfully. You can convert a tarball to RPM&#x2F;deb pretty seamlessly most of the time.</font></span><p><font size="1"><u><a href="reply?id=9010678&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9010943" href="vote?for=9010943&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010943"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=alanfranzoni">alanfranzoni</a> 2 hours ago  | <a href="item?id=9010943">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I use FPM for architecture independent projects as well. But if you&#x27;re building for a different target you&#x27;re out of luck.<p>I was thinking about a docker-fpm-builder myself by the way, so maybe we&#x27;ll meet again :-)</font></span><p><font size="1"><u><a href="reply?id=9010943&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9010447" href="vote?for=9010447&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010447"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=peterwwillis">peterwwillis</a> 3 hours ago  | <a href="item?id=9010447">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Generating a source rpm is not required to build a binary rpm, so I don&#x27;t get the point of this tool. All you need to build a binary RPM is a .spec file. The spec file can then determine how to build and package it, like using sources already on disk, downloading sources, using a list of pre-compiled or noarch files, etc.<p>Building RPMS is typically a platform-specific thing, because most distributions bastardize their systems to be incompatible with others&#x27; RPMs. RPMs provided by vendors and 3rd parties typically shove everything into &#x2F;opt and depend on very little to work around this. If you want your package to be portable you should probably do the same.</font></span><p><font size="1"><u><a href="reply?id=9010447&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010492" href="vote?for=9010492&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010492"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=rwmj">rwmj</a> 3 hours ago  | <a href="item?id=9010492">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">RPM is a packaging format, not a packaging standard.  Fedora has a massive set of guidelines.  OpenSUSE has a massive and different set of guidelines, because it&#x27;s a different distro with different goals.  Mandriva, another set.  And so on.  The fact they all happen to use RPM is pretty much irrelevant.</font></span><p><font size="1"><u><a href="reply?id=9010492&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9010709" href="vote?for=9010709&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010709"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nailer">nailer</a> 3 hours ago  | <a href="item?id=9010709">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">A (really old version of) RPM is in the LSB. OTOH the LSB is dead - log into any Linux box and run lsb_release</font></span><p><font size="1"><u><a href="reply?id=9010709&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9010537" href="vote?for=9010537&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010537"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=peterwwillis">peterwwillis</a> 3 hours ago  | <a href="item?id=9010537">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is true, but they&#x27;re also all Linux distributions providing exactly the same software, and all duplicating hundreds of hours of effort per package by doing exactly the same thing with tiny incompatible differences. It doesn&#x27;t have to be that way. For example, they could provide shims for the incompatibilities in each others&#x27; standards so the packages <i>edit: spec files</i> could be reused without breaking on other systems. But instead they work in silos. Sigh</font></span><p><font size="1"><u><a href="reply?id=9010537&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9010564" href="vote?for=9010564&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010564"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=rwmj">rwmj</a> 3 hours ago  | <a href="item?id=9010564">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is a problem (if you consider it a problem) of all Linux distros.  It&#x27;s just that people look at the foo.rpm file and think it should be installable anywhere, but no one would look at a foo.deb file and think they could install it on Arch.</font></span><p><font size="1"><u><a href="reply?id=9010564&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9010641" href="vote?for=9010641&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010641"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=peterwwillis">peterwwillis</a> 3 hours ago  | <a href="item?id=9010641">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">If Debian packages only required a single text file to build everything, they could! It would be simple for the distros to combine their efforts on a single .spec file. Back in the day I used to make RPM .specs that would build the package successfully on Solaris, Linux, Windows, etc and then had tools to convert the RPM into a native package format for easier maintenance. Writing an rpm2dstream script took just a couple hours.</font></span><p><font size="1"><u><a href="reply?id=9010641&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9010884" href="vote?for=9010884&amp;dir=up&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37"><div class="votearrow" title="upvote"></div></a><span id="down_9010884"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=alanfranzoni">alanfranzoni</a> 2 hours ago  | <a href="item?id=9010884">link</a><span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">THe .src.rpm is not required if you use rpmbuild (which is what docker-rpm-builder does inside the container) but AFAIK you need to build a .src.rpm if you want to use mock.<p>Building RPMs is a platform specific thing indeed, and the &#x2F;opt way is a very common way to go (docker-rpm-builder itself is installed in &#x2F;opt in my prebuilt packages), but you still want to compile in an enviroment as close as the target to be sure your software works.</font></span><p><font size="1"><u><a href="reply?id=9010884&amp;whence=%69%74%65%6d%3f%69%64%3d%39%30%31%30%31%32%37">reply</a></u></font></td></tr></table></td></tr></table><br><br>
</td></tr><tr><td><img src="s.gif" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tr><td bgcolor="#ff6600"></td></tr></table><br>
<center><span class="yclinks"><a href="newsguidelines.html">Guidelines</a> | <a href="newsfaq.html">FAQ</a> | <a href="mailto:hn@ycombinator.com">Support</a> | <a href="lists">Lists</a> | <a href="bookmarklet.html">Bookmarklet</a> | <a href="dmca.html">DMCA</a> | <a href="http://www.ycombinator.com/">Y Combinator</a> | <a href="http://www.ycombinator.com/apply/">Apply</a> | <a href="http://www.ycombinator.com/contact/">Contact</a></span><br><br>
<form method="get" action="//hn.algolia.com/">Search: <input type="text" name="q" value="" size="17"></form></center></td></tr></table></center></body></html>